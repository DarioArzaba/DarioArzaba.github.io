---
layout: post_page
title: PNG Spec
---
<iframe height='300' width='214' sandbox="allow-scripts" src='http://pgn4web-board.casaschi.net/?am=n&amp;d=2000&amp;ss=26&amp;ps=d&amp;pf=d&amp;lcs=_XNo&amp;dcs=O8AB&amp;bbcs=O8AB&amp;bscs=b&amp;hm=n&amp;hcs=r4fT&amp;bd=s&amp;cbcs=YeiP&amp;ctcs=$$$$&amp;hd=h&amp;md=t&amp;tm=13&amp;fmcs=$$$&amp;fccs=v71$&amp;hmcs=_XNo&amp;fms=11&amp;fcs=m&amp;cd=i&amp;bcs=____&amp;fp=0&amp;hl=f&amp;fh=320&amp;fw=214&amp;

pe=103$zlax9RvfEG8ovpM739pNgYVM739pNmuAVJT39pNmXX5Hh01BHz4AVvs$wilhVgZKNI$wila2$8x1pw$0zBfcizb$3QF7O_v0

'>No disponible</iframe>

http://www.saremba.de/chessgml/standards/pgn/pgn-complete.htm
https://sourceforge.net/p/pgn4web/wiki/Index/

https://www.chess.com/analysis-board-editor

*******************


PGN o Portable Game Notation es el estandar para representar partidas de ajedrez en archivos de texto con encoding ASCII. Su principal objetivo es ser facilmente entendible y editable por humanos y computadoras. El formato es importado, entendido, procesado y exportado rapidamente por cualquier software de ajedrez, tomando en cuenta que existen otros formatos (^n) adaptados para usos mucho más especificos.

Creado en 1993 por Steven J. Edwards.

El formato fue una herramienta importante al inicio del internet para poder compartir eficazmente las partidas de ajedrez.

Con el impacto de la computacion en el ajedrez y la proliferacion de computadoras portatiles todo jugador profesional recurrio a las poderosas herramientas para el analizis de las partidas. El uso de estos programas y el almacenamiento digital de las partidas fue un gran problema ya que el espacio de almacenamiento escaseaba. La portabilidad representaba entonces el mayor problema si es que se queria transportar y guardar librerias digitales con miles de juegos.

Existen dos formatos para PGN. EL de importar y el de exportar.
El de importar es normalmente editado y visualizado por humanos por lo que su sintax es permisiva, el de exportar esta diseñado para la comunicacion entre programas por lo que una misma partida tiene que ser exactamente igual sin importar que programa haya exportado el archivo y su sintaxis es muy extricta.

Los archivos comienzan con pares de atributos y valores entre corchetes separados por un espacio y con el valor entre comillas
[Atributo "Valor"]
En el modo de exportacion se requieren siete atributos estandares que aparescan al princiio del archivo y que esten separados por saltos de linea.

Event: the name of the tournament or match event.
Site: the location of the event. This is in City, Region COUNTRY format, where COUNTRY is the three-letter International Olympic Committee code for the country. An example is New York City, NY USA.
Date: the starting date of the game, in YYYY.MM.DD form. ?? is used for unknown values.
Round: the playing round ordinal of the game within the event.
White: the player of the white pieces, in Lastname, Firstname format.
Black: the player of the black pieces, same format as White.
Result: the result of the game. This can only have four possible values: 1-0 (White won), 0-1 (Black won), 1/2-1/2 (Draw), or * (other, e.g., the game is ongoing).
The standard allows for supplementation in the form of other, optional, tag pairs. The more common tag pairs include:

Annotator: The person providing notes to the game.
PlyCount: String value denoting total number of half-moves played.
TimeControl: e.g. 40/7200:3600 (moves per seconds: sudden death seconds)
Time: Time the game started, in HH:MM:SS format, in local clock time.
Termination: Gives more details about the termination of the game. It may be abandoned, adjudication (result determined by third-party adjudication), death, emergency, normal, rules infraction, time forfeit, or unterminated.
Mode: OTB (over-the-board) ICS (Internet Chess Server)
FEN: The initial position of the chess board, in Forsyth-Edwards Notation. This is used to record partial games (starting at some initial position). It is also necessary for chess variants such as Chess960, where the initial position is not always the same as traditional chess. If a FEN tag is used, a separate tag pair SetUp must also appear and have its value set to 1.


El Movetext contiene los movimientos del juego en la notacion SAN (Standard Algebraic Notation) numerados por turnos con un punto y espacio seguido de cada nuemero si es el turno de las blancas y tres puntos si es el turno de las negras.

Para agregar una variacion del juego insertamos los movimientos de la variacion entre corchetes.


Comentarios agregando Numeric Annotation Glyphs (NAGs) into the movetext. 
Each NAG reflects a subjective impression of the move preceding the NAG or of the resultant position.

Si el resultado no es un asterisco entenoces el juego se repite.

Para insertar comentarios usamos un punto y coma queriendo decir que el comentario dura hasta el final de la linea o entre llaves.


[Event "F/S Return Match"]
[Site "Belgrade, Serbia JUG"]
[Date "1992.11.04"]
[Round "29"]
[White "Fischer, Robert J."]
[Black "Spassky, Boris V."]
[Result "1/2-1/2"]

1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 {This opening is called the Ruy Lopez.}
4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 d6 8. c3 O-O 9. h3 Nb8 10. d4 Nbd7
11. c4 c6 12. cxb5 axb5 13. Nc3 Bb7 14. Bg5 b4 15. Nb1 h6 16. Bh4 c5 17. dxe5
Nxe4 18. Bxe7 Qxe7 19. exd6 Qf6 20. Nbd2 Nxd6 21. Nc4 Nxc4 22. Bxc4 Nb6
23. Ne5 Rae8 24. Bxf7+ Rxf7 25. Nxf7 Rxe1+ 26. Qxe1 Kxf7 27. Qe3 Qg5 28. Qxg5
hxg5 29. b3 Ke6 30. a3 Kd6 31. axb4 cxb4 32. Ra5 Nd5 33. f3 Bc8 34. Kf2 Bf5
35. Ra7 g6 36. Ra6+ Kc5 37. Ke1 Nf4 38. g3 Nxh3 39. Kd2 Kb5 40. Rd6 Kc5 41. Ra6
Nf2 42. g4 Bd3 43. Re6 1/2-1/2



Forsyth-Edwards Notation (FEN) is used to record the starting position for variants (such as Chess960) which have initial positions other than the orthodox chess initial position.



syntaxis flexible y estricata



Event (Evento): el nombre del torneo o de la competencia.
Site (lugar): el lugar donde el evento se llevó a cabo. Esto debe ser en formato "Ciudad, Región PAÍS", donde PAÍS es el código del mismo en tres letras de acuerdo a l código del Comité Olímpico Internacional. Cómo ejemplo: "México, D.F. MEX".
Date (fecha): la fecha de inicio de la partida en formato AAAA.MM.DD. Cuando se desconocen los valores se utilizan "??".
Round (ronda): La ronda original de la partida.
White (blancas): El jugador de las piezas blancas, en formato "apellido, nombre".
Black (negras): El jugador de las negras en el mismo formato.
Result (resultado): El resultado del juego. Sólo puede tener cuatro posibles valores: "1-0" (las blancas ganaron), "0-1" (Las negras ganaron), "1/2-1/2" (Tablas), o "*" (para otro, ejemplos: el juego está actualmente en disputa o un jugador falleció durante la partida).
Muchos otros pares de etiquetas son definidos por los estándares. Entre los que están:

Time (tiempo): La hora en que el juego empezó en formato "HH:MM:SS" de tiempo local.
Termination (fin): Da más detalles del fin del juego. Puede ser "abandono", "adjudicación" (resultado determinado por adjudicación de una tercera parte), "muerte", "emergencia", "normal", "infracción a las reglas", "tiempo acabado" o "no finalizado".
FEN: La posición inicial del juego en notación de Forsyth-Edwards (del inglés Forsyth-Edwards Notation). Esta se utiliza para registrar juegos parciales, que empiezan en alguna posición determinada. También es necesaria para variantes del ajedrez como en el Ajedrez aleatorio de Fischer, donde la posición inicial no es siempre la del ajedrez convencional. Si se utiliza una etiqueta FEN entonces debe colocarse un par de etiquetas adicional llamado "SetUp" (inicialización) con un valor de "1".


artida es muy famosa y se llama "La inmortal":

[Event "Informal Game"]
[Site "London, England ENG"]
[Date "1851.07.??"]
[Round "-"]
[White "Anderssen, Adolf"]
[Black "Kieseritzky, Lionel"]
[Result "1-0"]

1.e4 e5 2.f4 exf4 3.Bc4 Qh4+ 4.Kf1 b5 5.Bxb5 Nf6 6.Nf3 Qh6 7.d3 Nh5 8.Nh4 Qg5
9.Nf5 c6 10.g4 Nf6 11.Rg1 cxb5 12.h4 Qg6 13.h5 Qg5 14.Qf3 Ng8 15.Bxf4 Qf6
16.Nc3 Bc5 17.Nd5 Qxb2 18.Bd6 Bxg1 19.e5 Qxa1+ 20.Ke2 Na6 21.Nxg7+ Kd8
22.Qf6+ Nxf6 23.Be7# 1-0

Sobre las variantes de ajedrez[editar]
Las variantes de ajedrez pueden también ser grabadas utilizando PGN. Estas son comúnmente anotadas con una etiqueta llamada "Variant" (variante)

EJEMPLO

[Event "F/S Return Match"] 
[Site "Belgrade, Serbia JUG"] 
[Date "1992.11.04"] 
[Round "29"] 
[White "Fischer, Robert J."]
[Black "Spassky, Boris V."] 
[Result "1/2-1/2"] 

1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 d6 8. c3
O-O 9. h3 Nb8 10. d4 Nbd7 11. c4 c6 12. cxb5 axb5 13. Nc3 Bb7 14. Bg5 b4 15.
Nb1 h6 16. Bh4 c5 17. dxe5 Nxe4 18. Bxe7 Qxe7 19. exd6 Qf6 20. Nbd2 Nxd6 21.
Nc4 Nxc4 22. Bxc4 Nb6 23. Ne5 Rae8 24. Bxf7+ Rxf7 25. Nxf7 Rxe1+ 26. Qxe1 Kxf7
27. Qe3 Qg5 28. Qxg5 hxg5 29. b3 Ke6 30. a3 Kd6 31. axb4 cxb4 32. Ra5 Nd5 33.
f3 Bc8 34. Kf2 Bf5 35. Ra7 g6 36. Ra6+ Kc5 37. Ke1 Nf4 38. g3 Nxh3 39. Kd2 Kb5
40. Rd6 Kc5 41. Ra6 Nf2 42. g4 Bd3 43. Re6 1/2-1/2


Para evitar problemas de compatibilidad con otros sistemas operativos se define a la nueva linea como su equivalente ASCII a Line Feed, decimal 10 o hexadecimal 0x0a.

Para aumentar la velocidad de procesamiento los programas pueden optar por exportar en formato de exportaicon reducido, eliminado comentarios, solo usando los siete tags (Seven Tag Roster) SRT Info y no tiene variaciones recursivas RAV, no tiene anotaciones NAG.


Encoding: Pgn esta representada usando un subset del  ISO 8859/1 (Latin 1) character set 8 bytes. tambien conocido como ECMA-94. Este subset incluye los caracteres ASCII para los 32 valores de control princiales y los de imrpesion del 32 al 126 (PGN no utiliza el caracter DEL del 127).

The 32 ISO 8859/1 code values from 128 to 159 are non-printing control characters. 
The 32 code values from 160 to 191 are mostly non-alphabetic printing characters and their use for PGN data is discouraged 
The 64 code values from 192 to 255 are mostly alphabetic printing characters with various diacritical marks; 

Only four of the ASCII control characters are permitted in PGN import format;
these are the horizontal and vertical tabs along with the linefeed and carriage return codes.

Tabs horizontales y verticales no son permitidas en el formato de exportacion.


Escape Char ("%") appearing in the first column of a line; the data on the rest of the line is ignored by publicly available PGN scanning software. This escape convention is intended for the private use of software developers and researchers to embed non-PGN commands and data in PGN streams.

Si no se encuentra en la primer posicion de un string no se genera el escape.

Un punto tiene un simbolismo especial para determinar el final de la definicon del numero del turno
El asterisco se usa al final para identificar un juego incompleto o en donde el resutlado no se conoce.
Los corchetes delimitan etiquetas
Los parentesis delimitan RAV recursive annotation variations.
Los simbolos html de tags se reservan para amploar el API en un futuro.

A Numeric Annotation Glyph ("NAG", see below) is a token; it is composed of a dollar sign character ("$") immediately followed by one or more digit characters. It is terminated just prior to the first non-digit character following the digit sequence.


Un mismo Archivo PNG puede contener varios juegos generando una base de datos confiable.
Un juego PNG se delimita por las etiquetas iniciales y la seccion "Movetext".

Todas las etiquetas deben de empezar capitalizzadas.
Las etiquetas deben de aparecer en orden:

Event (the name of the tournament or match event)
Site (the location of the event)
Date (the starting date of the game)
Round (the playing round ordinal of the game)
White (the player of the white pieces)
Black (the player of the black pieces)
Result (the result of the game)
(Se añade un nuevo espacio para separar las etiquedas tel movetext)

Si un valor de las etiquedas es desconocido se pone un signo de interrogacion. En el caso de las fechas se pone el numero correspondiente.
En event se permiten los espacios.
[Event "Casual Game"]
El sitio debe incluir ciudad, region y norme estandar del pais usado IOC tres letras nombres.
[Site "New York City, NY USA"]
La fecha da el dia que se inicio el juego, no debe de coincidar con el inicio del evento y se da con respecto al tiempo local en formato año, mes y dia separados por puntos.
[Date "2001.01.01"]
La ronda identifica la ronda en el torneo. En casos de rondas por partes y secuenciales se pueden utilizar puntos para separar cada secuencia o parte de una serie.
[Round "1"]
[Round "4.1.2"]
Nombre de las blancas y las negras con el segundo nombre apareciendo primero. en el caso de programas su nomrbe y su version se pueden utilizar.
[White "Tal, Mikhail N."]
[White "van der Wiel, Johan"]
[White "Acme Pawngrabber v.3.2"]
El resultado del juego debe coincidir con el marcador que conlcuye el Movetext. Tiene cuatro valores posibles:
"1-0" (White wins), "0-1" (Black wins), "1/2-1/2" (drawn game), and "*" (game still in progress, game abandoned, or result otherwise unknown).

Ningun PNG puede empezar o terminar con un espacio.

Las promociones son indicadas con un signo de igual y la pieza promovida

Import format PGN allows for the use of traditional suffix annotations for moves. There are exactly six such annotations available: "!", "?", "!!", "!?", "?!", and "??". At most one such suffix annotation may appear per move, and if present, it is always the last part of the move symbol.
When exported, a move suffix annotation is translated into the corresponding Numeric Annotation Glyph
For example, if the single move symbol "Qxa8?" appears in an import format PGN movetext, it would be replaced with the two adjacent symbols "Qxa8 $2".




An NAG (Numeric Annotation Glyph) is a movetext element that is used to indicate a simple annotation in a language independent manner. An NAG is formed from a dollar sign ("$") with a non-negative decimal integer suffix. The non-negative integer must be from zero to 255 in value.

An RAV (Recursive Annotation Variation) is a sequence of movetext containing one or more moves enclosed in parentheses. An RAV is used to represent an alternative variation. The alternate move sequence given by an RAV is one that may be legally played by first unplaying the move that appears immediately prior to the RAV. Because the RAV is a recursive construct, it may be nested.

WhiteTitle, BlackTitle (titulo)
WhiteElo, BlackElo (Rating Elo)
WhiteUSCF, BlackUSCF (Rating USCF)
WhiteNA, BlackNA (email)
WhiteType, BlackType (Human or program)
EventDate (Fecha del evento)
EventSponsor (Promotor del evento)
Stage (e.g., "Preliminary" or "Semifinal").

Propuestas:

ECO (Apertura eco  "XDD" or the form "XDD/DD" where the "X" is a letter from "A" to "E" and the "D" positions are digits; this is used for an opening designation from the five volume _Encyclopedia of Chess Openings_. 
NIC  opening designation from the _New in Chess_ database. 
Time (Hora en la que inicia el juego en HH:MM:SS.)
UTCTime (Igual que time pero en UTCT)
Time control (Tiempo de Control usado)
-40 moves in 2 1/2 hours would be represented as "40/9000".
-Sudden death usa un solo integral.
- an incremental time control of 90 minutes plus one extra minute per move would be given by "4500+60" in the TimeControl tag value.
SetUp (Integral que denota el setuop del juego. Cero es por default, 1 indica que empieza en otra posicion la cual se indica con una etiqueda FEN.
FEN (Forsyth-Edwards Notation String con el valor de la posicion inicial del juego, necesita del SetUp con un valor de 1)
Termination Especifica la razon de la conclusion del juego como: 
"abandoned": abandoned game.
"adjudication": result due to third party adjudication process.
"death": losing player called to greater things, one hopes.
"emergency": game concluded due to unforeseen circumstances.
"normal": game terminated in a normal fashion.
"rules infraction": administrative forfeit due to losing player's failure to observe either the Laws of Chess or the event regulations.
"time forfeit": loss due to losing player's failure to meet time control requirements.
"unterminated": game not terminated.
Annotator (Nombre del anotador o comentarista)
Mode (Indica el modo de ajedrez jugado: "OTB" (over the board), "PM" (paper mail), "EM" (electronic mail), "ICS" (Internet Chess Server), and "TC" (general telecommunication).
PlyCount (Numero de movimientos ya jugados al inicio)


NAGs with values from 1 to 9 annotate the move just played.
NAGs with values from 10 to 135 modify the current position.
NAGs with values from 136 to 139 describe time pressure.

INLCUIR NAG LIST


Convenciones de archivos

The use of the file suffix ".pgn" is encouraged for ASCII text files containing PGN data.
PGN games for a specific player should have a file name consisting of the player's last name followed by the ".pgn" suffix.
PGN games for a specific event should have a file name consisting of the event's name followed by the ".pgn" suffix.
A file containing all the PGN games for a given year would have an eight character name in the format "YYYY.pgn". 
A file containing PGN data for a given month would have a ten character name in the format "YYYYMM.pgn".


Estructura recomendada de una base de datos con multiples PGNs:

PGN: master directory of the PGN subtree (pub/chess/Game-Databases/PGN)
PGN/Events: directory of PGN files, each for a specific event
PGN/Events/News: news and status of the event collection
PGN/Events/ReadMe: brief description of the local directory contents
PGN/MGR: directory of the Master Games Repository subtree
PGN/MGR/News: news and status of the entire PGN/MGR subtree
PGN/MGR/ReadMe: brief description of the local directory contents
PGN/MGR/YYYY: directory of games or subtrees for the year YYYY
PGN/MGR/YYYY/ReadMe: description of local directory for year YYYY
PGN/MGR/YYYY/News: news and status for year YYYY data
PGN/News: news and status of the entire PGN subtree
PGN/Players: directory of PGN files, each for a specific player
PGN/Players/News: news and status of the player collection
PGN/Players/ReadMe: brief description of the local directory contents
PGN/ReadMe: brief description of the local directory contents
PGN/Standard: the PGN standard (this document)
PGN/Tools: software utilities that access PGN data




University of Oklahoma at Norman (USA) have graciously provided an ftp site (chess.uoknor.edu) for the storage of chess related data and programs. 
ftp.math.uni-hamburg.de; this carries a daily mirror of the pub/chess directory at the chess.uoknor.edu site.


FEN is "Forsyth-Edwards Notation"; it is a standard for describing chess positions using the ASCII character set.
A single FEN record uses one text line of variable length composed of six data fields. The first four fields of the FEN specification are the same as the first four fields of the EPD specification.
A text file composed exclusively of FEN data records should have a file name with the suffix ".fen".
FEN is based on a 19th century standard for position recording designed by the Scotsman David Forsyth, a newspaper journalist. The original Forsyth standard has been slightly extended for use with chess software by Steven Edwards with assistance from commentators on the Internet. This new standard, FEN, was first implemented in Edwards' SAN Kit.
Having a standard position notation is particularly important for chess programmers as it allows them to share position databases. For example, there exist standard position notation databases with many of the classical benchmark tests for chessplaying programs, and by using a common position notation format many hours of tedious data entry can be saved. Additionally, a position notation can be useful for page layout programs and for confirming position status for e-mail competition.
Many interesting chess problem sets represented using FEN can be found at the chess.uoknor.edu ftp site in the directory pub/chess/SAN_testsuites.

FEN specifies the piece placement, the active color, the castling availability, the en passant target square, the halfmove clock, and the fullmove number. These can all fit on a single text line in an easily read format. The length of a FEN position description varies somewhat according to the position. In some cases, the description could be eighty or more characters in length and so may not fit conveniently on some displays. However, these positions aren't too common.
A FEN description has six fields. Each field is composed only of non-blank printing ASCII characters. Adjacent fields are separated by a single ASCII space character.
The first field represents the placement of the pieces on the board. The board contents are specified starting with the eighth rank and ending with the first rank. For each rank, the squares are specified from file a to file h. White pieces are identified by uppercase SAN piece letters ("PNBRQK") and black pieces are identified by lowercase SAN piece letters ("pnbrqk"). Empty squares are represented by the digits one through eight; the digit used represents the count of contiguous empty squares along a rank. A solidus character "/" is used to separate data of adjacent ranks.
The second field represents the active color. A lower case "w" is used if White is to move; a lower case "b" is used if Black is the active player.
The third field represents castling availability. This indicates potential future castling that may of may not be possible at the moment due to blocking pieces or enemy attacks. If there is no castling availability for either side, the single character symbol "-" is used. Otherwise, a combination of from one to four characters are present. If White has kingside castling availability, the uppercase letter "K" appears. If White has queenside castling availability, the uppercase letter "Q" appears. If Black has kingside castling availability, the lowercase letter "k" appears. If Black has queenside castling availability, then the lowercase letter "q" appears. Those letters which appear will be ordered first uppercase before lowercase and second kingside before queenside. There is no white space between the letters.
The fourth field is the en passant target square. If there is no en passant target square then the single character symbol "-" appears. If there is an en passant target square then is represented by a lowercase file character immediately followed by a rank digit. Obviously, the rank digit will be "3" following a white pawn double advance (Black is the active color) or else be the digit "6" after a black pawn double advance (White being the active color).
An en passant target square is given if and only if the last move was a pawn advance of two squares. Therefore, an en passant target square field may have a square name even if there is no pawn of the opposing side that may immediately execute the en passant capture.
The fifth field is a nonnegative integer representing the halfmove clock. This number is the count of halfmoves (or ply) since the last pawn advance or capturing move. This value is used for the fifty move draw rule.
The sixth and last field is a positive integer that gives the fullmove number. This will have the value "1" for the first move of a game for both White and Black. It is incremented by one immediately after each move by Black.


16.1.4: Examples

Here's the FEN for the starting position:

  rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
And after the move 1. e4:
  rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1
And then after 1. ... c5:
  rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq c6 0 2
And then after 2. Nf3:
  rnbqkbnr/pp1ppppp/8/2p5/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 2
For two kings on their home squares and a white pawn on e2 (White to move) with thirty eight full moves played with five halfmoves since the last pawn move or capture:
  4k3/8/8/8/8/8/4P3/4K3 w - - 5 39


EPD is "Extended Position Description"; it is a standard for describing chess positions along with an extended set of structured attribute values using the ASCII character set. It is intended for data and command interchange among chessplaying programs. It is also intended for the representation of portable opening library repositories.
A single EPD uses one text line of variable length composed of four data field followed by zero or more operations. The four fields of the EPD specification are the same as the first four fields of the FEN specification.
A text file composed exclusively of EPD data records should have a file name with the suffix ".epd".
EPD is based in part on the earlier FEN standard; it has added extensions for use with opening library preparation and also for general data and command interchange among advanced chess programs. EPD was developed by John Stanback and Steven Edwards; its first implementation is in Stanback's master strength chessplaying program Zarkov.
Like FEN, EPD can also be used for general position description. However, unlike FEN, EPD is designed to be expandable by the addition of new operations that provide new functionality as needs arise.
Many interesting chess problem sets represented using EPD can be found at the chess.uoknor.edu ftp site in the directory pub/chess/SAN_testsuites.
EPD specifies the piece placement, the active color, the castling availability, and the en passant target square of a position. These can all fit on a single text line in an easily read format. The length of an EPD position description varies somewhat according to the position and any associated operations. In some cases, the description could be eighty or more characters in length and so may not fit conveniently on some displays. However, most EPD descriptions pass among programs only and these are not usually seen by program users.
(Note: due to the likelihood of future expansion of EPD, implementors are encouraged to have their programs handle EPD text lines of up to 1024 characters long.)
Each EPD data field is composed only of non-blank printing ASCII characters. Adjacent data fields are separated by a single ASCII space character.
16.2.3.1: Piece placement data
The first field represents the placement of the pieces on the board. The board contents are specified starting with the eighth rank and ending with the first rank. For each rank, the squares are specified from file a to file h. White pieces are identified by uppercase SAN piece letters ("PNBRQK") and black pieces are identified by lowercase SAN piece letters ("pnbrqk"). Empty squares are represented by the digits one through eight; the digit used represents the count of contiguous empty squares along a rank. A solidus character "/" is used to separate data of adjacent ranks.
The second field represents the active color. A lower case "w" is used if White is to move; a lower case "b" is used if Black is the active player.
The third field represents castling availability. This indicates potential future castling that may or may not be possible at the moment due to blocking pieces or enemy attacks. If there is no castling availability for either side, the single character symbol "-" is used. Otherwise, a combination of from one to four characters are present. If White has kingside castling availability, the uppercase letter "K" appears. If White has queenside castling availability, the uppercase letter "Q" appears. If Black has kingside castling availability, the lowercase letter "k" appears. If Black has queenside castling availability, then the lowercase letter "q" appears. Those letters which appear will be ordered first uppercase before lowercase and second kingside before queenside. There is no white space between the letters.
The fourth field is the en passant target square. If there is no en passant target square then the single character symbol "-" appears. If there is an en passant target square then is represented by a lowercase file character immediately followed by a rank digit. Obviously, the rank digit will be "3" following a white pawn double advance (Black is the active color) or else be the digit "6" after a black pawn double advance (White being the active color).
An en passant target square is given if and only if the last move was a pawn advance of two squares. Therefore, an en passant target square field may have a square name even if there is no pawn of the opposing side that may immediately execute the en passant capture.
An EPD operation is composed of an opcode followed by zero or more operands and is concluded by a semicolon.
Multiple operations are separated by a single space character. If there is at least one operation present in an EPD line, it is separated from the last (fourth) data field by a single space character.

OPCODE
An opcode is an identifier that starts with a letter character and may be followed by up to fourteen more characters. Each additional character may be a letter or a digit or the underscore character.
An operand is either a set of contiguous non-white space printing characters or a string. A string is a set of contiguous printing characters delimited by a quote character at each end. A string value must have less than 256 bytes of data.
If at least one operand is present in an operation, there is a single space between the opcode and the first operand. If more than one operand is present in an operation, there is a single blank character between every two adjacent operands. If there are no operands, a semicolon character is appended to the opcode to mark the end of the operation. If any operands appear, the last operand has an appended semicolon that marks the end of the operation.
Any given opcode appears at most once per EPD record. Multiple operations in a single EPD record should appear in ASCII order of their opcode names (mnemonics). However, a program reading EPD records may allow for operations not in ASCII order by opcode mnemonics; the semantics are the same in either case.
Some opcodes that allow for more than one operand may have special ordering requirements for the operands. For example, the "pv" (predicted variation) opcode requires its operands (moves) to appear in the order in which they would be played. All other opcodes that allow for more than one operand should have operands appearing in ASCII order. An example of the latter set is the "bm" (best move[s]) opcode; its operands are moves that are all immediately playable from the current position.
Some opcodes require one or more operands that are chess moves. These moves should be represented using SAN. If a different representation is used, there is no guarantee that the EPD will be read correctly during subsequent processing.
Some opcodes require one or more operands that are integers. Some opcodes may require that an integer operand must be within a given range; the details are described in the opcode list given below. A negative integer is formed with a hyphen (minus sign) preceding the integer digit sequence. An optional plus sign may be used for indicating a non-negative value, but such use is not required and is indeed discouraged.
Some opcodes require one or more operands that are floating point numbers. Some opcodes may require that a floating point operand must be within a given range; the details are described in the opcode list given below. A floating point operand is constructed from an optional sign character ("+" or "-"), a digit sequence (with at least one digit), a radix point (always "."), and a final digit sequence (with at least one digit).


An opcode mnemonic used for archival storage and for interprogram communication starts with a lower case letter and is composed of only lower case letters, digits, and the underscore character (i.e., no upper case letters). These mnemonics will also all be at least two characters in length.
Opcode mnemonics used only by a single program or an experimental suite of programs should start with an upper case letter. This is so they may be easily distinguished should they be inadvertently be encountered by other programs. When a such a "private" opcode be demonstrated to be widely useful, it should be brought into the official list (appearing below) in a lower case form.
If a given program does not recognize a particular opcode, that operation is simply ignored; it is not signaled as an error.

LISTA INOFICIAL DE OPCODES


<PGN-database> ::= <PGN-game> <PGN-database>
                   <empty>

<PGN-game> ::= <tag-section> <movetext-section>

<tag-section> ::= <tag-pair> <tag-section>
                  <empty>

<tag-pair> ::= [ <tag-name> <tag-value> ]

<tag-name> ::= <identifier>

<tag-value> ::= <string>

<movetext-section> ::= <element-sequence> <game-termination>

<element-sequence> ::= <element> <element-sequence>
                       <recursive-variation> <element-sequence>
                       <empty>

<element> ::= <move-number-indication>
              <SAN-move>
              <numeric-annotation-glyph>

<recursive-variation> ::= ( <element-sequence> )

<game-termination> ::= 1-0
                       0-1
                       1/2-1/2
                       *
<empty> ::=



The binary coded version of PGN is PGC (PGN Game Coding). PGC is a binary representation standard of PGN data designed for the dual goals of storage efficiency and program I/O. A file containing PGC data should have a name with a suffix of ".pgc".
Unlike PGN text files that may have locale dependent representations for newlines, PGC files have data that does not vary due to local processing environment. This means that PGC files may be transferred among systems using general binary file methods.
PGC files should be used only when the use of PGN is impractical due to time and space resource constraints. As the general level of processing capabilities increases, the need for PGC over PGN will decrease. Therefore, implementors are encouraged not to use PGC as the default representation because it is much more difficult (than PGN) to understand without proper software.
PGC data is composed of a sequence of PGC records. Each record is composed of a sequence of one or more bytes. The first byte is the PGN record marker and it specifies the interpretation of the remaining portion of the record. This remaining portion is composed of zero or more PGN record items. Item types include move sequences, move sets, and character strings.
At the lowest level, PGC binary data is organized as bytes, words (two contiguous bytes), and doublewords (four contiguous bytes). All eight bits of a byte are used. Longwords (eight contiguous bytes) are not used. Integer values are stored using two's complement representation. Integers may be signed or unsigned depending on context. Multibyte integers are stored in low-endian format with the least significant byte appearing first.
A one byte integer item is called "int-1". A two byte integer item is called "int-2". A four byte integer item is called "int-4".
Characters are stored as bytes using the ISO 8859/1 Latin-1 (ECMA-94) code set. There is no provision for other characters sets or representations.



Examples: From the initial position, there are twenty moves. Move ordinal 0 corresponds to the SAN move string "Na3"; move ordinal 1 corresponds to "Nc3", move ordinal 4 corresponds to "a3", and move ordinal 19 corresponds to "h4".
Moves can be organized into sequences and sets. A move sequence is an ordered list of moves that are played, one after another from first to last. A move set is a list of moves that are all playable from the current position.
Move sequence data is represented using a length header followed by move ordinal data. The length header is an unsigned integer that may be a byte or a word. The integer gives the number, possibly zero, of following move ordinal bytes. Most move sequences can be represented using just a byte header; these are called "mvseq-1" items. Move sequence data using a word header are called "mvseq-2" items.
Move set data is represented using a length header followed by move ordinal data. The length header is an unsigned integer that is a byte. The integer gives the number, possibly zero, of following move ordinal bytes. All move sets are be represented using just a byte header; these are called "mvset-1" items. (Note the implied restriction that a move set can only have a maximum of 255 of the possible 256 ordinals present at one time.)

PGC string data is represented using a length header followed by bytes of character data. The length header is an unsigned integer that may be a byte, a word, or a doubleword. The integer gives the number, possibly zero, of following character bytes. Most strings can be represented using just a byte header; these are called "string-1" items. String data using a word header are called "string-2" items and string data using a doubleword header are called "string-4" items. No special ASCII NUL termination byte is required for PGC storage of a string as the length is explicitly given in the item header.
PGC marker codes are given in hexadecimal format. PGC marker code zero (marker 0x00) is the "noop" marker and carries no meaning. Each additional marker code defined appears in its own subsection below.
Marker 0x01 is used to indicate a single complete game in reduced export format. This refers to a game that has only the Seven Tag Roster data, played moves, and no annotations or comments. This record type is used as an alternative to the general game data begin/end record pairs described below. The general marker pair (0x05/0x06) is used to help represent game data that can't be adequately represented in reduced export format. There are eight items that follow marker 0x01 to form the "reduced export format single game" record. In order, these are:

string-1 (Event tag value)
string-1 (Site tag value)
string-1 (Date tag value)
string-1 (Round tag value)
string-1 (White tag value)
string-1 (Black tag value)
string-1 (Result tag value)
mvseq-2 (played moves)

Marker 0x02 is used to indicate a single tag pair. There are two items that follow marker 0x02 to form the "tag pair" record; in order these are:

string-1 (tag pair name)
string-1 (tag pair value)

Marker 0x03 is used to indicate a short move sequence. There is one item that follows marker 0x03 to form the "short move sequence" record; this is:

mvseq-1 (played moves)

Marker 0x04 is used to indicate a long move sequence. There is one item that follows marker 0x04 to form the "long move sequence" record; this is:

mvseq-2 (played moves)

Marker 0x05 is used to indicate the beginning of data for a game. It has no associated items; it is a complete record by itself. Instead, it marks the beginning of PGC records used to describe a game. All records up to the corresponding "general game data end" record are considered to be part of the same game. (PGC record type 0x01, "reduced export format single game", is not permitted to appear within a general game begin/end record pair. The general game construct is to be used as an alternative to record type 0x01 in those cases where the latter is too restrictive to contain the data for a game.)
Marker 0x06 is used to indicate the end of data for a game. It has no associated items; it is a complete record by itself. Instead, it marks the end of PGC records used to describe a game. All records after the corresponding (and earlier appearing) "general game data begin" record are considered to be part of the same game.
Marker 0x07 is used to indicate the presence of a simple NAG (Numeric Annotation Glyph). This is an annotation marker that has only a short type identification and no operands. There is one item that follows marker 0x07 to form the "simple-nag" record; this is:

int-1 (unsigned NAG value, from 0 to 255)

20.4.8: Marker 0x08: rav-begin

Marker 0x08 is used to indicate the beginning of an RAV (Recursive Annotation Variation). It has no associated items; it is a complete record by itself. Instead, it marks the beginning of PGC records used to describe a recursive annotation. It is considered an opening bracket for a later rav-end record; the recursive annotation is completely described between the bracket pair. The rav-begin/data/rav-end structures can be nested.

20.4.9: Marker 0x09: rav-end

Marker 0x09 is used to indicate the end of an RAV (Recursive Annotation Variation). It has no associated items; it is a complete record by itself. Instead, it marks the end of PGC records used to describe a recursive annotation. It is considered a closing bracket for an earlier rav-begin record; the recursive annotation is completely described between the bracket pair. The rav-begin/data/rav-end structures can be nested.

20.4.10: Marker 0x0a: escape-string

Marker 0x0a is used to indicate the presence of an escape string. This is a string represented by the use of the percent sign ("%") escape mechanism in PGN. The data that is escaped is the sequence of characters immediately follwoing the percent sign up to but not including the terminating newline. As is the case with the PGN percent sign escape, the use of a PGC escape-string record is limited to use for non-archival data. There is one item that follows marker 0x0a to form the "escape-string" record; this is the string data being escaped:

string-2 (escaped string data)


















-------------------------------------------
El incremento de Boards DGT para la retransmicion en vivo de los juegos no estaba planeado en la especificacion y el no poder codificar la variable de tiempo en el archivo lo pone en desventaja con otros formatos propietarios.
Una propuesta es incluir las marcas de tiempo dentro de los comentarios para no romper la sintaxis dle formato. Y de añadir una o dos variables al header lo cual esta permitido por el estandar siempre que se mantengan las siete etiquetas elementales.

Ejemplo:
 TimeControl Es el tag obligatorio para incluir marcas de tiempo.
{Optional leading comments [%clk 1:05:23] optional trailing comments} 

Estructura
A leading tag of [%
A command name consisting of one or more alphanumeric characters.
A space character.
Either a single parameter or a comma delimited list of parameter values.
A closing tag of ]

Se propone el uso de CLK para el comando de tiempo de movimiento
El parametro de tiempo o parametros se basan el la sintaxis del OPCODE EPD de la especificacion.



An operand is either:
i) a set containing any ascii characters except the comma and right hand square 
bracket
or
ii) a double quoted string containing a set of any ascii characters except the 
double quote.

For instance:
[%command 1:45:12,Nf6,"very interesting, but wrong"]

This command has four operands, a time value, a san move value and a double 
quote delimitted string. Note that the quote delimitted string may contain 
commas.

Commas are illegal in non quote delimitted strings because the comma serves as 
the operand list separator.

Right hand square brackets are illegal in non quote delimitted strings because 
they terminate both the last operand and the command.

We have thus departed from the epd opcode specification in two ways:
i) The operand list is separated using a comma rather than a space. 
ii) Space characters are allowed in non quote delimited operands

So it is possible to pass a full FEN string as an unquoted operand as in the 
example below.
[%command "very tense start to the 
game",4r1k1/pp1b2r1/2n1pq1p/3p2pP/2pP2B1/P1P1Q3/2P2PPB/R4RK1 w - - 0 1,e4,d4]

This command has four operands, the first is a double quote delimitted string, 
the second is a FEN, the third is e4 and the fourth is d4.

Un comentario puede tener multiples comandos:
{[%clk 0:00:07][%eval -6.05] White is toast}
Todos los comandos toman un unico parametros en formato h:mm:ss
{[%clk 1:55:21]}
Este comando es el propuesto para mostrar el reloj (TOTAL??) de los jugadores.
{[%egt 1:25:42]}
El tiempo que un jugador a usado sumando todos sus movimientos hasta ese punto de la partida.
{[%emt 0:05:42]}
El tiempo que un jugador a usado para un movimiento en particular
[Clock "B/0:45:56"]
Muestra el reloj de las negras (B), blancas (W) o reloj detenido (N).
En el caso de que el juego sea pospuesto para despues para mostrar los relojes individuales podemos agregar:
[WhiteClock "1:07:00"]
[BlackClock "0:56:00"]

EJEMPLO:

[Event "?"]
[Site "Madrid"]
[Date "1995.??.??"]
[White "Beliavsky, A "]
[Black "Timman, J "]
[Result "1-0"]
[ECO "E35"]
[Round "2"]
[TimeControl "40/7200:3600"]
[WhiteClock "2:00:00"]
[BlackClock "2:00:00"]
[Clock "W/1:34:56"]

1. d4 {[%clk 1:59:01]} Nf6 {[%clk 1:59:32] Timman hesitates slightly} 2. c4 
{[%clk 1:58:00]} e6 {[%clk 1:57:01]} 3. Nc3 {[%clk 1:37:00] Beliavsky clearly 
suprised here takes a full [%emt 0:20:00] on this move} Bb4 {[%clk 1:54:25]} 

El tiempo de control es de 40 movimientos en dos horas y luego una hora extra para terminar.
Los tiempos individuales en los relojes son redudantes pues muestran que faltan dos horas que corresponden al primer tiempo de la variable anterior.
El tag del reloj solo es relevante cuando se modifica dinamicamente para la representacion del juego en vivo.
El pgn generado por DGT bards debera generar el comadno CLK despues de TODO movimiento.
Notece le uso de EMT para indicar que las blancas se tardaron 20 segundos en realizar el movimiento.

9 Authors websites:
DGT Projects: http://www.dgtprojects.com/
Chess Base: http://www.chessbase.com/
Chess Assistant: http://www.chessassistant.com/
Palview: http://www.enpassant.dk/chess/palview/

Steve Edwards tambien genero otro formato para resolver estos problemas pero nunca fue implementado exitosamente
BIF format here: 
http://groups.google.com/groups?hl=en&safe=off&ic=1&th=1fe06718d5ec89a5,20&seekm=4psfnl%24i5m%40darkstar.UCSC.EDU
Este forma utiliza los delimitadores HTML (<>), sin embargo precisamente por general problemas con HTML decidimos no incluirlos.
Notece que en la especificaicon normal existe el tag (Time) pero solo denota la hora a la que inicia la partida.
-----------------------------------------------------------------------


